
```javascript
/** 
 * @description 使用数组(对象也可以)对s的字符串按升序排序,
 *              数组的下标表示字符,数组下标对应的值表示字符出现的次数.
 *              有了这个升序数组,从左->右遍历,从右->左遍历来收集字符串,直到s里面的字符都被访问完.
 * @param {string} s
 * @return {string}
 */
var sortString = function (s) {

    const { length } = s;
    // 先给字符串s排个序,sorted是一个数组,数组的下标表示字符,数组下标对应的值表示字符出现的次数
    const sorted = s.split('').reduce((sorted, value) => {
        const key = value.charCodeAt() - 97;
        sorted[key] = (sorted[key] || 0) + 1;
        return sorted;
    }, []);

    let results = '';

    // 从sorted中收集字符到results
    const collection = (results, value, index, array) => {
        if (value > 0) {
            results += String.fromCharCode(index + 97);
            array[index] = value - 1;
        }
        return results;
    };

    while (results.length < length) {
        // 收集升序的字符
        results = sorted.reduce(collection, results);
        // 如果第一次就选完了s中的全部字符串
        if (results.length >= length) {
            return results;
        }
        // 收集降序的字符
        results = sorted.reduceRight(collection, results);
    }

    return results;
};
```
